<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© ì‹œë®¬ë ˆì´í„°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="bg-white shadow-lg rounded-2xl p-6 max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-4">ğŸ” ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© ì‹œë®¬ë ˆì´í„°</h2>

    <div class="mb-6">
      <label for="passwordInput" class="block font-semibold mb-1">ë¹„ë°€ë²ˆí˜¸ ì…ë ¥</label>
      <input id="passwordInput" type="text" placeholder="ì˜ˆ: password123" class="w-full border border-gray-300 rounded-md p-2" />
      <button onclick="hashPassword()" class="bg-blue-500 text-white mt-2 px-4 py-2 rounded hover:bg-blue-600">í•´ì‹œ ë³€í™˜</button>
      <p class="mt-2 text-sm">í•´ì‹œê°’: <span id="hashedResult" class="font-mono bg-gray-100 px-2 py-1 rounded">-</span></p>
    </div>

    <div class="mb-6">
      <label for="hashToCrack" class="block font-semibold mb-1">ê³µê²© ëŒ€ìƒ í•´ì‹œê°’</label>
      <input id="hashToCrack" type="text" class="w-full border border-gray-300 rounded-md p-2" placeholder="SHA-256 í•´ì‹œê°’ ì…ë ¥" />
    </div>

    <div class="mb-6">
      <label class="block font-semibold mb-1">ë¬¸ì ì¢…ë¥˜ ì„ íƒ</label>
      <div class="flex flex-wrap gap-4">
        <label><input type="checkbox" id="includeNumbers" checked class="mr-1"/>ìˆ«ì (0-9)</label>
        <label><input type="checkbox" id="includeLowercase" class="mr-1"/>ì†Œë¬¸ì (a-z)</label>
        <label><input type="checkbox" id="includeUppercase" class="mr-1"/>ëŒ€ë¬¸ì (A-Z)</label>
        <label><input type="checkbox" id="includeSymbols" class="mr-1"/>íŠ¹ìˆ˜ë¬¸ì (!@#$...)</label>
      </div>
    </div>

    <div class="mb-6">
      <label for="maxLength" class="block font-semibold mb-1">ìµœëŒ€ ìë¦¿ìˆ˜</label>
      <input type="number" id="maxLength" min="1" value="4" class="w-24 border border-gray-300 rounded-md p-2" />
    </div>

    <button onclick="startBruteForce()" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">ê³µê²© ì‹œì‘</button>

    <div class="mt-4">
      <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden">
        <div class="h-full bg-green-500 transition-all" id="progressBar" style="width: 0%"></div>
      </div>
      <p class="text-sm mt-2 text-center">ì§„í–‰ë¥ : <span id="progressText">0%</span></p>
    </div>

    <p id="result" class="mt-6 text-lg font-semibold text-center">ê²°ê³¼: -</p>
  </div>

  <script>
    function hashPassword() {
      const password = document.getElementById("passwordInput").value;
      const hash = CryptoJS.SHA256(password).toString();
      document.getElementById("hashedResult").textContent = hash;
    }

    function getCharset() {
      let charset = "";
      if (document.getElementById("includeNumbers").checked) charset += "0123456789";
      if (document.getElementById("includeLowercase").checked) charset += "abcdefghijklmnopqrstuvwxyz";
      if (document.getElementById("includeUppercase").checked) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      if (document.getElementById("includeSymbols").checked) charset += "!@#$%^&*()-_=+[]{}|;:'\",.<>/?`~";
      return charset;
    }

    async function startBruteForce() {
      const targetHash = document.getElementById("hashToCrack").value.trim();
      const charset = getCharset();
      const maxLen = parseInt(document.getElementById("maxLength").value);
      const resultBox = document.getElementById("result");
      const progressBar = document.getElementById("progressBar");
      const progressText = document.getElementById("progressText");

      if (!charset) {
        alert("í•˜ë‚˜ ì´ìƒì˜ ë¬¸ì ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.");
        return;
      }

      resultBox.textContent = "ê³µê²© ì‹œì‘...";
      progressBar.style.width = "0%";
      progressText.textContent = "0%";

      let found = false;
      let attempts = 0;
      const startTime = performance.now();

      let totalComb = 0;
      for (let len = 1; len <= maxLen; len++) {
        totalComb += Math.pow(charset.length, len);
      }

      let testedComb = 0;

      async function* generateStrings(charset, maxLen) {
        for (let len = 1; len <= maxLen; len++) {
          const indices = Array(len).fill(0);
          while (true) {
            yield indices.map(i => charset[i]).join("");
            let pos = len - 1;
            while (pos >= 0) {
              if (indices[pos] + 1 < charset.length) {
                indices[pos]++;
                break;
              } else {
                indices[pos] = 0;
                pos--;
              }
            }
            if (pos < 0) break;
          }
        }
      }

      for await (const candidate of generateStrings(charset, maxLen)) {
        const hash = CryptoJS.SHA256(candidate).toString();
        attempts++;
        testedComb++;

        if (attempts % 500 === 0) {
          const percent = ((testedComb / totalComb) * 100).toFixed(1);
          progressBar.style.width = percent + "%";
          progressText.textContent = percent + "%";
        }

        if (hash === targetHash) {
          const elapsed = ((performance.now() - startTime) / 1000).toFixed(2);
          resultBox.textContent = `âœ… ë¹„ë°€ë²ˆí˜¸ ì°¾ìŒ: "${candidate}" (ì‹œë„: ${attempts}íšŒ, ì‹œê°„: ${elapsed}ì´ˆ)`;
          progressBar.style.width = "100%";
          progressText.textContent = "100%";
          found = true;
          break;
        }

        if (attempts % 2000 === 0) await new Promise(r => setTimeout(r, 1));
      }

      if (!found) {
        resultBox.textContent = `âŒ ì‹¤íŒ¨: ${maxLen}ìë¦¬ ì´í•˜ì—ì„œ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.`;
      }
    }
  </script>
</body>
</html>
